<h1>Here is your location, and the location of the nearest Soccer Pitch</h1>
<div id="map"></div>


<script type="text/javascript">

    var map;
    function initMap() {

      var user = {lat: <%= @user_location.lat %>, lng: <%= @user_location.lng %>};
      var pitch = {lat: <%= @pitch.latitude %>, lng: <%= @pitch.longitude %>};


      var map = new google.maps.Map(document.getElementById('map'), {
        center: user,
        scrollwheel: false,
        zoom: 5
      });

      var directionsDisplay = new google.maps.DirectionsRenderer({
        map: map
      });

      var request = {
        destination: pitch,
        origin: user,
        travelMode: google.maps.TravelMode.DRIVING
      };

      var directionsService = new google.maps.DirectionsService();
      directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          // Display the route on the map.
          directionsDisplay.setDirections(response);
        }
      });
    }


    // var playing_image = "<%= image_url "playin.jpg" %>";
    // var soccer_image = "<%= image_url "soccer-ball.png" %>";

  //  var you = new google.maps.Marker({
  //   position: {lat: <%= @user_location.lat %>, lng: <%= @user_location.lng %>},
  //   map: map,
  //   title: 'You'
  //   label: "You",
  //   animation: google.maps.Animation.DROP
  //   // icon: playing_image
  // });

//     var pitch = new google.maps.Marker({
//     position: {lat: <%= @pitch.latitude %>, lng: <%= @pitch.longitude %>},
//     map: map,
//     title: 'Your pitch!'
//     label: "Pitch",
//     animation: google.maps.Animation.DROP
//     // icon: soccer_image
//   });
// }

</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBH1Nw9chGoRMKXeviLn3ox6OoF1A8FhFk&callback=initMap">
</script>